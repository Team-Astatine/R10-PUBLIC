package org.Astatine.r10.Contents.Restricted.AntiExploit.Interaction.PlayerInteraction;

import org.Astatine.r10.Contents.EventRegister;
import org.Astatine.r10.Enumeration.Type.ColorType;
import org.Astatine.r10.Util.Function.StringComponentExchanger;
import org.bukkit.GameMode;
import org.bukkit.entity.Player;
import org.bukkit.event.inventory.InventoryType;
import org.bukkit.event.player.PlayerCommandPreprocessEvent;

public class RestrictedCommandInInventoryHandler extends StringComponentExchanger implements EventRegister {

    private final PlayerCommandPreprocessEvent event;

    public RestrictedCommandInInventoryHandler(PlayerCommandPreprocessEvent event) {
        this.event = event;

        init();
        execute();
    }

    @Override
    public void init() {

    }

    @Override
    public void execute() {
        Player player = this.event.getPlayer();

        // System.out.println(player.getOpenInventory().getType());
        if (player.getGameMode() == GameMode.CREATIVE)
            return;

        if (player.getOpenInventory().getType() == InventoryType.CRAFTING)
            return;

        this.event.setCancelled(true);
        player.sendMessage(
                componentExchanger("인벤토리를 사용 중 명령어를 실행할 수 없습니다.", ColorType.RED)
        );
    }
}
