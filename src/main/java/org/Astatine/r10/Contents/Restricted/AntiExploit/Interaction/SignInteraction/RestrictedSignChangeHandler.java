package org.Astatine.r10.Contents.Restricted.AntiExploit.Interaction.SignInteraction;

import java.util.List;

import org.Astatine.r10.Contents.EventRegister;
import org.Astatine.r10.Util.Function.StringComponentExchanger;
import org.bukkit.Material;
import org.bukkit.event.block.SignChangeEvent;

import net.kyori.adventure.text.Component;
import net.kyori.adventure.text.TextComponent;

public class RestrictedSignChangeHandler extends StringComponentExchanger implements EventRegister {

    private final SignChangeEvent event;

    public RestrictedSignChangeHandler(SignChangeEvent event) {
        this.event = event;

        init();
        execute();
    }

    @Override
    public void init() {}

    @Override
    public void execute() {
        int totalLength = 0;
        List<Component> lines = event.lines();

        for (Component lineComp : lines) {
            totalLength += ((TextComponent) lineComp).content().length();

            if (totalLength < 45)
                return;

            this.event.getBlock().setType(Material.AIR);
        }
    }
}
